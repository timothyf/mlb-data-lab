

# MLB Stats

`MLB Stats` is a Python-based application designed to fetch, process, and generate comprehensive summary sheets for MLB players and teams using data from remote APIs. By leveraging the [`pybaseball`](https://github.com/jldbc/pybaseball) module, [`MLB-StatsAPI`](https://github.com/toddrob99/MLB-StatsAPI) module, and other Python libraries, the project facilitates the collection, analysis, and formatting of data for use in reports, dashboards, and other analytical tools.

The project sources data from MLB and Fangraphs, ensuring accurate and up-to-date statistics. Future updates will expand the application's features and functionality, allowing it to serve both as a standalone tool and as a library for integration into other projects.


## Sample Summary Sheets
Below are samples of the summary sheets that can be generated by this project. The first sample is a Batting Summary for Riley Greene for the 2024 season. The second sample is a Pitching Summary for Tarik Skubal for the 2024 season.

<div id="user-content-toc">
  <summary>
<h1 align="center" style="padding:100px">
<img src="docs/images/batter_summary_riley_greene.png?sanitize=true" alt="Riley Greene Batter Sheet" width="300" />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<img src="docs/images/pitcher_summary_tarik_skubal.png?sanitize=true" alt="Tarik Skubal Pitcher Sheet" width="300"/>
</h1>
  </summary>

In addition to the baseball stats you would expect, the summary sheets also include the following "advanced" stats:
<table>
<thead>
  <th colspan=2>Batters</th>
  <th></th>
  <th colspan=3>Pitchers</th>
</thead>
<tr>
  <td class="batter-col">BB%</td>
  <td class="batter-col">UBR</td>
  <td>&nbsp;</td>
  <td class="pitcher-col">K/9</td>
  <td class="pitcher-col">Opponent Avg</td>
  <td class="pitcher-col">Swing %</td>
</tr>
<tr>
  <td class="batter-col">K%</td>
  <td class="batter-col">XBR</td>
  <td>&nbsp;</td>
  <td class="pitcher-col">BB/9</td>
  <td class="pitcher-col">WHIP</td>
  <td class="pitcher-col">Splits</td>
</tr>
<tr>
  <td class="batter-col">OBP</td>
  <td class="batter-col">wRC</td>
  <td>&nbsp;</td>
  <td class="pitcher-col">K/BB</td>
  <td class="pitcher-col">BABIP</td>
</tr>
<tr>
  <td class="batter-col">SLG</td>
  <td class="batter-col">wRAA</td>
  <td>&nbsp;</td>
  <td class="pitcher-col">H/9</td>
  <td class="pitcher-col">LOB%</td>
</tr>
<tr>
  <td class="batter-col">OPS</td>
  <td class="batter-col">wOBA</td>
  <td>&nbsp;</td>
  <td class="pitcher-col">HR/9</td>
  <td class="pitcher-col">ERA-</td>
</tr>
<tr>
  <td class="batter-col">ISO</td>
  <td class="batter-col">wRC+</td>
  <td>&nbsp;</td>
  <td class="pitcher-col">K%</td>
  <td class="pitcher-col">FIP-</td>
</tr>
<tr>
  <td class="batter-col">Spd</td>
  <td class="batter-col">WAR</td>
  <td>&nbsp;</td>
  <td class="pitcher-col">BB%</td>
  <td class="pitcher-col">FIP</td>
</tr>
<tr>
  <td class="batter-col">BABIP</td>
  <td class="batter-col">Splits</td>
  <td>&nbsp;</td>
  <td class="pitcher-col">K-BB%</td>
  <td class="pitcher-col">RS/9</td>
</tr>

  
</table>


</div>

## Project Structure

The `mlb_stats` project is organized as follows:

```
mlb_stats/
├── README.md              # Project documentation
├── setup.py               # Setup file for packaging and installation
├── requirements.txt       # Dependencies for the project
├── mlb_stats/
│   ├── apis/
│   │   ├── stats_api.py   # API client for fetching MLB stats
│   │   ├── fangraphs_client.py # API client for Fangraphs data
│   ├── components/
│   │   ├── stats_table.py # Class for generating stats tables
│   ├── data/
│   │   ├── 
│   ├── data_viz/
│   │   ├── batting_spray_chart.py
│   │   ├── pitch_break_plot.py
│   │   ├── pitch_breakdown_table.py
│   │   ├── pitch_velocity_distribution_plot.py
│   │   ├── rolling_pitch_usage_plot.py
│   │   ├── plotting.py
│   ├── player/
│   │   ├── player.py
│   │   ├── player_bio.py
│   │   ├── player_info.py
│   │   ├── player_lookup.py
│   ├── stats/
│   │   ├── 
│   ├── summary_sheets/
│   │   ├── batter_summary_sheet.py
│   │   ├── pitcher_summary_sheet.py
│   │   ├── summary_sheet.py
│   │   ├── team_summary_sheet.py
│   ├── team/
│   │   ├── roster.py
│   │   ├── team.py
│   ├── config.py
│   ├── constants.py
│   ├── utils.py
├── scripts/
│   ├── generate_player_summary.py
│   ├── save_statcast_data.py
├── tests/
│   ├── 

```

### Description of Key Directories:
- **mlb_stats/**: Core application logic and components.
  - **apis/**: API clients for retrieving stats from external services like MLB and Fangraphs.
  - **components/**: 
  - **data/**: 
  - **data_viz/**:
  - **player/**:
  - **stats/**: 
  - **summary_sheets/**:
  - **team/**:
- **scripts/**: Scripts for generating player summary sheets and saving statcast data.
- **tests/**: Unit tests for verifying the functionality of various components and modules.  
  

## Installation


To get started with the project, follow these steps:

1. Clone the repository:

```bash
git clone https://github.com/timothyf/mlb_stats.git
cd mlb_stats
```

2. Set up a Python virtual environment (optional but recommended):
```bash
python3 -m venv venv
source venv/bin/activate
```

3. Install the required dependencies:

```bash
pip install -r requirements.txt
```

## Usage

#### Generating Player Summary Sheets
There are several scripts in the `scripts` directory for some basic functionality:
```bash
python scripts/generate_player_summary.py [options]

Options:
    --players [1 or more player names]
    --teams [1 or more team names]
    --year [specify a 4-digit year]
```

#### Saving Statcast Data
Run the project by executing the main script in the `scripts` directory:
```bash
python scripts/save_statcast_data.py [options]

    --players [1 or more player names]
    --teams [1 or more team names]
    --year [specify a 4-digit year]
```

## Examples
#### Generate a player sheet for Riley Greene
```bash
python scripts/generate_player_summary.py --players 'Riley Greene'
```
Output:<br/>
`mlb_stats/output/2024/Tigers/`batter_summary_riley_greene.png<br/><br/>
<img src="docs/images/batter_summary_riley_greene.png?sanitize=true" alt="Riley Greene Batter Sheet" width="300" />

#### Generate a player sheets for all of the 2024 Detroit Tigers
```bash
python scripts/generate_player_summary.py --teams 'Detroit Tigers' --year 2024
````

<br/>

## Inspiration

This project was inspired by my time working in the R&D department of the Washington Nationals, and the pitching summary project from Thomas Nestico. Here is a link to an article describing his project:

https://medium.com/@thomasjamesnestico/creating-the-perfect-pitching-summary-7b8a981ef0c5


## Copyright Notice

This package and its author are not affiliated with MLB or any MLB team. This API wrapper interfaces with MLB's Stats API. Use of MLB data is subject to the notice posted at http://gdx.mlb.com/components/copyright.txt.


<style>
table td.batter-col {
    background-color: lightblue;
    color: black;
}
table td.pitcher-col {
    background-color: lightgreen;
    color: black;
}
</style>
